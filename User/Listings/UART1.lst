C51 COMPILER V9.60.7.0   UART1                                                             11/29/2024 17:30:56 PAGE 1   


C51 COMPILER V9.60.7.0, COMPILATION OF MODULE UART1
OBJECT MODULE PLACED IN .\Objects\UART1.obj
COMPILER INVOKED BY: D:\Keil_v5\C51\BIN\C51.EXE ..\Hardware\UART1.C OPTIMIZE(8,SPEED) BROWSE INCDIR(..\Hardware) DEBUG O
                    -BJECTEXTEND PRINT(.\Listings\UART1.lst) TABS(2) OBJECT(.\Objects\UART1.obj)

line level    source

   1          #include <STC12C5A60S2.H>
   2          #include <stdio.h>
   3          #include "UART1.H"
   4          
   5          
   6          
   7          void Uart1_Init(void) //9600bps@11.0592MHz
   8          {
   9   1        PCON &= 0x7F;   //波特率不倍速
  10   1        SCON = 0x50;    //8位数据,可变波特率
  11   1        AUXR |= 0x04;   //定时器时钟1T模式
  12   1        BRT = 0xDC;     //设置定时重载值
  13   1        AUXR |= 0x01;   //串口1使用独立波特率发射器为波特率发生器
  14   1        AUXR |= 0x10;   //启动独立波特率发射器
  15   1        ES = 1;       //使能串口1中断
  16   1        
  17   1      }
  18          
  19          //向串口发送一个字符
  20          void Uart1_SendByte(unsigned char dat)
  21          {
  22   1          while (busy1);           //Wait for the completion of the previous data is sent
  23   1          ACC = dat;              //Calculate the even parity bit P (PSW.0)
  24   1          busy1 = 1;
  25   1          SBUF = ACC;             //Send data to UART buffer
  26   1      }
  27          
  28          //向串口发送一段字符串
  29          void Uart1_SendString(unsigned char *dat)
  30          {
  31   1        unsigned char i= 0;
  32   1        
  33   1        for(i = 0;dat[i]!='\0';i++){Uart1_SendByte(dat[i]);}
  34   1        if(dat[i]=='\0')Uart1_SendByte('\0');
  35   1      }
  36          
  37          //串口重定向
  38          char putchar(char c){
  39   1        //输出重定向到串口
  40   1        Uart1_SendByte(c);
  41   1        return c;  //返回给函数的调用者printf
  42   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     89    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       3
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
